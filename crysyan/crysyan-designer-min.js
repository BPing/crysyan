/**
 * crysyan - a web drawing board with canvas
 * @version v0.2.0
 * @link https://github.com/BPing/crysyan#readme
 * @author cbping
 * @license Apache-2.0
 */
!function(){function e(){if(window.crypto&&window.crypto.getRandomValues&&-1===navigator.userAgent.indexOf("Safari")){for(var e=window.crypto.getRandomValues(new Uint32Array(3)),n="",r=0,a=e.length;r<a;r++)n+=e[r].toString(36);return n}return(Math.random()*(new Date).getTime()).toString(36).replace(/\./g,"")}function n(n,r){var a=this;a.appendTo=function(i){a.iframe=document.createElement("iframe"),a.iframe.name=n.ifrName?n.ifrName:"default-iframe"+e(),a.iframe.uid=a.iframe.name,a.iframe.src=(n.projectPath||"")+"crysyan.html?config="+JSON.stringify(n),a.iframe.style.width="100%",a.iframe.style.height="100%",a.iframe.style.border=0,a.iframe.onload=function(){r(a)},i.appendChild(a.iframe)},a.destroy=function(){a.iframe&&(a.iframe.parentNode.removeChild(a.iframe),a.iframe=null)},a.getView=function(){return window[a.iframe.uid].Crysyan.getView()},a.drawBackgroupWithImage=function(e,n){a.drawBackgroundWithImage(e,n)},a.drawBackgroundWithImage=function(e,n){window[a.iframe.uid].Crysyan.getView().crysyanCanvas.drawBackgroundWithImage(e,n)},a.toDataUrl=function(e){return void 0===e&&(e="image/png"),window[a.iframe.uid].Crysyan.getView().crysyanCanvas.toDataURL(e)},a.getCanvasRecorder=function(e){return window[a.iframe.uid].Crysyan.getView().crysyanCanvas.getCanvasRecorder(e)}}if(!window.$){var r=window.parent.$||window.jQuery;if(!r)throw new Error("Crysyan requires 'jQuery'");window.$=r}$.fn.CrysyanDesigner=function(e,r){this.each(function(){new n(e,r).appendTo(this)})},window.CrysyanDesigner=n}();